<div class="ui stacked segment">
    <div class="ui items">
        <div class="item">
            <div class="ui small image">
                <img ng-src="{{ BookPostsCtrl.book.image_url }}">
            </div>
            <div class="content">
                <a class="header" ng-href="/books/{{BookPostsCtrl.book.id}}/posts">{{ BookPostsCtrl.book.title }}</a>
                <div class="ui right floated labeled button" tabindex="0" ng-switch="BookPostsCtrl.isSubscribed().toString()">
                    <div class="ui orange button" ng-switch-default ng-click="BookPostsCtrl.unsubscribe()">
                        <i class="notched circle loading icon"></i> Loading
                    </div>

                    <div class="ui orange button" ng-switch-when="true" ng-click="BookPostsCtrl.unsubscribe()">
                        <i class="star icon"></i> Unsubscribe
                    </div>

                    <div class="ui orange button" ng-switch-when="false" ng-click="BookPostsCtrl.subscribe()">
                        <i class="star icon"></i> Subscribe
                    </div>

                    <div class="ui basic orange left pointing label" ng-bind="BookPostsCtrl.getNumberOfSubscribers()"></div>
                </div>
                <div class="description">
                    <p>Author: {{ BookPostsCtrl.book.author }}</p>
                    <p>ISBN-13: {{ BookPostsCtrl.book.isbn_13 }}</p>
                </div>
            </div>
        </div>

        <div class="ui divider"></div>

        <h1 class="ui header">
            <i class="announcement icon"></i>
            <div class="content">
                Posts
                <div class="sub header">People who wants to sell the book: <i>{{ BookPostsCtrl.book.title }}</i></div>
            </div>
        </h1>

        <table class="ui basic table">
            <thead>
            <tr>
                <th>Seller's Name</th>
                <th>Condition</th>
                <th>Price</th>
                <th>Description</th>
                <th>Publish Time</th>
            </tr>
            </thead>
            <tbody>
            <tr ng-repeat="post in BookPostsCtrl.posts">
                <td>{{ post.user.full_name }}</td>
                <td ng-switch="post.condition.toString()">
                    <a class="ui red label" ng-switch-when="1">Intensively Used</a>
                    <a class="ui orange label" ng-switch-when="2">Moderately Used</a>
                    <a class="ui yellow label" ng-switch-when="3">Alright Condition</a>
                    <a class="ui olive label" ng-switch-when="4">Like New</a>
                    <a class="ui green label" ng-switch-when="5">Brand New</a>
                </td>
                <td>$ {{ post.price }}</td>
                <td>{{ post.description }}</td>
                <td am-time-ago="post.created_at"></td>
            </tr>
            </tbody>
        </table>
    </div>
</div>
